---
const navLinks = [
  { name: 'Home', href: '/' },
  {
    name: 'About us',
    href: '/about',
    dropdown: [
      { name: 'Our groups', href: '/about/our-groups' },
      { name: 'Play days', href: '/about/play-days' },
      { name: 'Our conductor', href: '/about/our-conductor' },
      { name: 'Our patron', href: '/about/our-patron' },
    ]
  },
  { name: 'Events', href: '/events' },
  { name: 'Contact us', href: '/contact' },
];
---

<header class="sticky top-0 z-50 w-full bg-white border-b border-graphite/5">
  <div class="container mx-auto flex h-24 items-center justify-between px-4 sm:px-6 lg:px-8">
    <div class="flex items-center">
      <a href="/" class="text-2xl font-serif font-normal tracking-tight text-opera-madder">
        Sevenoaks Saxes
      </a>
    </div>

    <!-- Desktop Navigation -->
    <nav class="hidden md:flex md:items-center md:space-x-12">
      {navLinks.map((link) => (
        <div class="relative group">
          {link.dropdown ? (
            <div class="flex items-center space-x-1 cursor-default py-2">
              <a href={link.href} class="text-base font-semibold text-graphite hover:text-opera-madder transition-colors uppercase tracking-widest">
                {link.name}
              </a>
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-graphite/40 group-hover:text-opera-madder transition-transform group-hover:rotate-180" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>

              <!-- Dropdown Menu -->
              <div class="absolute left-0 top-full mt-0 w-56 rounded-sm bg-white py-4 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 ease-in-out border border-graphite/5 shadow-2xl">
                {link.dropdown.map((sublink) => (
                  <a href={sublink.href} class="block px-6 py-2 text-sm text-graphite hover:bg-opera-madder-soft hover:text-opera-madder transition-colors uppercase tracking-wider">
                    {sublink.name}
                  </a>
                ))}
              </div>
            </div>
          ) : (
            <a href={link.href} class="text-base font-semibold text-graphite hover:text-opera-madder transition-colors py-2 uppercase tracking-widest">
              {link.name}
            </a>
          )}
        </div>
      ))}
    </nav>

    <!-- Mobile Menu Button -->
    <div class="flex md:hidden">
      <button id="mobile-menu-button" type="button" class="inline-flex items-center justify-center rounded-md p-2 text-graphite hover:bg-graphite/5 transition-colors" aria-controls="mobile-menu" aria-expanded="false">
        <span class="sr-only">Open main menu</span>
        <svg id="menu-icon-open" class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
        <svg id="menu-icon-close" class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div class="hidden md:hidden" id="mobile-menu">
    <div class="space-y-1 px-4 pb-6 pt-2 bg-white border-t border-graphite/5">
      {navLinks.map((link) => (
        <div class="py-2">
          <a href={link.href} class="block rounded-md px-3 py-2 text-lg font-bold text-graphite hover:text-opera-madder transition-colors uppercase tracking-widest">
            {link.name}
          </a>
          {link.dropdown && (
            <div class="ml-6 space-y-1 mt-1 border-l border-graphite/10">
              {link.dropdown.map((sublink) => (
                <a href={sublink.href} class="block rounded-md px-4 py-2 text-sm font-medium text-graphite/70 hover:text-opera-madder transition-colors uppercase tracking-wider">
                  {sublink.name}
                </a>
              ))}
            </div>
          )}
        </div>
      ))}
    </div>
  </div>
</header>

<script>
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  const openIcon = document.getElementById('menu-icon-open');
  const closeIcon = document.getElementById('menu-icon-close');

  if (mobileMenuButton && mobileMenu && openIcon && closeIcon) {
    mobileMenuButton.addEventListener('click', () => {
      const expanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
      mobileMenuButton.setAttribute('aria-expanded', String(!expanded));
      mobileMenu.classList.toggle('hidden');
      openIcon.classList.toggle('hidden');
      closeIcon.classList.toggle('hidden');
    });
  }
</script>
