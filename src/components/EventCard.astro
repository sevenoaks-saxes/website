---
const { event } = Astro.props;
const { name, date, time, location, type, description } = event.data;

const formattedDate = new Date(date).toLocaleDateString('en-GB', {
  weekday: 'long',
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});

const typeColors = {
  concert:
    'text-heritage-currant border-heritage-currant/20 bg-heritage-currant-soft',
  rehearsal: 'text-sage-ash border-sage-ash/20 bg-sage-ash-soft',
  'play day': 'text-mist-blue-dark border-mist-blue/20 bg-mist-blue-soft',
  other: 'text-graphite border-graphite/20 bg-graphite-soft',
};
---

<div
  class="flex flex-col overflow-hidden bg-white border border-graphite/5 transition-all hover:border-graphite/20 group"
>
  <div class="p-8">
    <div class="flex items-center justify-between mb-8">
      <span
        class={`inline-flex items-center px-3 py-1 text-[10px] font-bold uppercase tracking-[0.2em] border ${typeColors[type] || typeColors.other}`}
      >
        {type}
      </span>
      <span
        class="text-xs font-semibold text-graphite/40 uppercase tracking-widest"
        >{time}</span
      >
    </div>
    <h3
      class="text-2xl font-serif font-normal mb-4 text-heritage-currant group-hover:text-heritage-currant-hover transition-colors leading-tight"
    >
      <a href={`/events/${event.id}`}>
        {name}
      </a>
    </h3>
    <p class="text-xs font-bold text-sage-ash uppercase tracking-widest mb-6">
      {formattedDate}
    </p>
    <p
      class="text-sm text-graphite/60 font-medium mb-8 leading-relaxed line-clamp-2 italic"
    >
      {location}
    </p>
    <p class="text-graphite/80 line-clamp-3 leading-relaxed text-sm">
      {description}
    </p>
  </div>
  <div class="px-8 pb-8 mt-auto">
    <a
      href={`/events/${event.id}`}
      class="text-[11px] font-bold text-graphite uppercase tracking-[0.2em] hover:text-heritage-currant transition-colors inline-flex items-center border-b border-graphite/10 pb-1"
    >
      Explore Event
    </a>
  </div>
</div>
