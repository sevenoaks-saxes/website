---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import EventCard from '../../components/EventCard.astro';

const events = await getCollection('events');
// Sort events by date (upcoming first)
const sortedEvents = events.sort((a, b) => new Date(a.data.date).getTime() - new Date(b.data.date).getTime());
---

<Layout title="Events" description="Upcoming concerts, rehearsals, and play days for Sevenoaks Saxes.">
  <div class="prose-container mb-24">
    <h1 class="text-4xl font-serif font-normal text-opera-madder mb-8">Upcoming Events</h1>
    <p class="text-xl text-graphite/60 leading-relaxed italic">Stay up to date with our performances, rehearsals, and workshops.</p>
  </div>

  <div class="grid gap-12 md:grid-cols-2 lg:grid-cols-3">
    {sortedEvents.map(event => (
      <EventCard event={event} />
    ))}
  </div>

  {events.length === 0 && (
    <div class="text-center py-24">
      <p class="text-graphite/40 uppercase tracking-[0.2em] font-bold text-xs">No upcoming events at the moment.</p>
    </div>
  )}
</Layout>
