---
const navLinks = [
  { name: 'Home', href: '/' },
  {
    name: 'About us',
    href: '/about',
    dropdown: [
      { name: 'Our groups', href: '/about/our-groups' },
      { name: 'Play days', href: '/about/play-days' },
      { name: 'Our conductor', href: '/about/our-conductor' },
      { name: 'Our patron', href: '/about/our-patron' },
    ],
  },
  { name: 'Events', href: '/events' },
  { name: 'Contact us', href: '/contact' },
];

import Logo from './Logo.astro';
---

<header
  class="sticky top-0 z-50 w-full glass border-b border-knole-ink/5 transition-all duration-300"
>
  <div
    class="container mx-auto flex h-20 items-center justify-between px-6 sm:px-8 lg:px-12"
  >
    <div class="flex items-center">
      <a
        href="/"
        class="group flex items-center gap-3 text-2xl font-serif font-normal tracking-tight text-knole-ink"
      >
        <Logo
          class="h-9 w-9 text-wealden-green"
        />
        <span class="font-serif">Sevenoaks Saxes</span>
      </a>
    </div>

    <!-- Desktop Navigation -->
    <nav class="hidden md:flex md:items-center md:space-x-12 h-full">
      {
        navLinks.map((link) => (
          <div class="relative group h-full flex items-center">
            {link.dropdown ? (
              <div class="flex items-center space-x-1.5 cursor-default h-full">
                <a
                  href={link.href}
                  class="text-base font-semibold text-knole-ink/80 hover:text-wealden-green transition-all duration-300 tracking-wide relative after:absolute after:bottom-[-4px] after:left-0 after:h-0.5 after:w-0 group-hover:after:w-full after:bg-wealden-green after:transition-all after:duration-300"
                >
                  {link.name}
                </a>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-4 w-4 text-knole-ink/60 group-hover:text-wealden-green transition-transform duration-300 group-hover:rotate-180"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2.5"
                    d="M19 9l-7 7-7-7"
                  />
                </svg>

                {/* Dropdown Menu */}
                <div class="absolute left-1/2 -translate-x-1/2 top-full w-64 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 ease-out scale-95 group-hover:scale-100 origin-top z-50">
                  <div class="pt-4">
                    <div class="glass border-knole-ink/5 p-3 rounded-2xl shadow-2xl space-y-1">
                      {link.dropdown.map((sublink) => (
                        <a
                          href={sublink.href}
                          class="block px-4 py-3 text-[15px] font-medium text-knole-ink hover:bg-wealden-green/5 hover:text-wealden-green rounded-xl transition-all duration-200"
                        >
                          {sublink.name}
                        </a>
                      ))}
                    </div>
                  </div>
                </div>
              </div>
            ) : (
              <a
                href={link.href}
                class="text-base font-semibold text-knole-ink/80 hover:text-wealden-green transition-all duration-300 tracking-wide relative after:absolute after:bottom-[-4px] after:left-0 after:h-0.5 after:w-0 hover:after:w-full after:bg-wealden-green after:transition-all after:duration-300"
              >
                {link.name}
              </a>
            )}
          </div>
        ))
      }
    </nav>

    <!-- Mobile Menu Button -->
    <div class="flex md:hidden">
      <button
        id="mobile-menu-button"
        type="button"
        class="inline-flex items-center justify-center rounded-full p-2.5 text-knole-ink hover:bg-wealden-green/10 transition-colors"
        aria-controls="mobile-menu"
        aria-expanded="false"
      >
        <span class="sr-only">Open main menu</span>
        <svg
          id="menu-icon-open"
          class="block h-7 w-7"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          aria-hidden="true"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
        <svg
          id="menu-icon-close"
          class="hidden h-7 w-7"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          aria-hidden="true"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div class="hidden md:hidden overflow-hidden" id="mobile-menu">
    <div
      class="px-6 pb-12 pt-4 glass border-t border-knole-ink/5 shadow-2xl space-y-6"
    >
      {
        navLinks.map((link) => (
          <div class="space-y-4">
            <a
              href={link.href}
              class="block text-2xl font-serif text-knole-ink hover:text-wealden-green transition-colors"
            >
              {link.name}
            </a>
            {link.dropdown && (
              <div class="grid grid-cols-1 gap-4 pl-4 border-l-2 border-wealden-green/20">
                {link.dropdown.map((sublink) => (
                  <a
                    href={sublink.href}
                    class="block text-lg font-medium text-knole-ink/70 hover:text-wealden-green transition-colors"
                  >
                    {sublink.name}
                  </a>
                ))}
              </div>
            )}
          </div>
        ))
      }
    </div>
  </div>
</header>

<script>
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  const openIcon = document.getElementById('menu-icon-open');
  const closeIcon = document.getElementById('menu-icon-close');

  if (mobileMenuButton && mobileMenu && openIcon && closeIcon) {
    mobileMenuButton.addEventListener('click', () => {
      const expanded =
        mobileMenuButton.getAttribute('aria-expanded') === 'true';
      mobileMenuButton.setAttribute('aria-expanded', String(!expanded));
      mobileMenu.classList.toggle('hidden');
      openIcon.classList.toggle('hidden');
      closeIcon.classList.toggle('hidden');
    });
  }
</script>
