---
const { event } = Astro.props;
const { name, date, time, location, type, description } = event.data;

const formattedDate = new Date(date).toLocaleDateString('en-GB', {
  weekday: 'long',
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});

const typeColors = {
  concert: 'bg-purple-100 text-purple-800',
  rehearsal: 'bg-blue-100 text-blue-800',
  'play day': 'bg-green-100 text-green-800',
  other: 'bg-gray-100 text-gray-800',
};
---

<div class="flex flex-col overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm transition-shadow hover:shadow-md">
  <div class="p-6">
    <div class="flex items-center justify-between mb-2">
      <span class={`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${typeColors[type] || typeColors.other}`}>
        {type.charAt(0).toUpperCase() + type.slice(1)}
      </span>
      <span class="text-sm text-gray-500">{time}</span>
    </div>
    <h3 class="text-xl font-bold font-serif mb-2">
      <a href={`/events/${event.id}`} class="hover:text-purple-600">
        {name}
      </a>
    </h3>
    <p class="text-sm font-medium text-gray-600 mb-2">{formattedDate}</p>
    <p class="text-sm text-gray-500 mb-4">{location}</p>
    <p class="text-gray-700 line-clamp-3">{description}</p>
  </div>
  <div class="bg-gray-50 px-6 py-3 border-t border-gray-200">
    <a href={`/events/${event.id}`} class="text-sm font-semibold text-purple-600 hover:text-purple-500">
      View details &rarr;
    </a>
  </div>
</div>
