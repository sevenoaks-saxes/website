---
const { event } = Astro.props;
const { name, date, time, location, type, description } = event.data;

const formattedDate = new Date(date).toLocaleDateString('en-GB', {
  weekday: 'long',
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});

const typeColors = {
  concert: 'bg-brand-red text-brand-cream',
  rehearsal: 'bg-brand-mist-soft text-brand-mist-dark',
  'play day': 'bg-brand-leaf-soft text-brand-leaf-dark',
  other: 'bg-brand-charcoal-soft text-brand-charcoal',
};
---

<div class="flex flex-col overflow-hidden rounded-lg border border-brand-mist-border bg-brand-cream-hover shadow-sm transition-all hover:shadow-md hover:-translate-y-1">
  <div class="p-6">
    <div class="flex items-center justify-between mb-4">
      <span class={`inline-flex items-center rounded-full px-3 py-1 text-xs font-bold uppercase tracking-wider ${typeColors[type] || typeColors.other}`}>
        {type}
      </span>
      <span class="text-sm font-medium text-brand-charcoal-muted">{time}</span>
    </div>
    <h3 class="text-xl font-bold mb-2">
      <a href={`/events/${event.id}`} class="hover:text-brand-red transition-colors">
        {name}
      </a>
    </h3>
    <p class="text-sm font-semibold text-brand-mist-dark mb-2">{formattedDate}</p>
    <p class="text-sm text-brand-charcoal-muted mb-4">{location}</p>
    <p class="text-brand-charcoal line-clamp-3 leading-relaxed">{description}</p>
  </div>
  <div class="bg-brand-cream-dark px-6 py-4 border-t border-brand-mist-border mt-auto">
    <a href={`/events/${event.id}`} class="text-sm font-bold text-brand-red hover:text-brand-red-hover transition-colors inline-flex items-center">
      View details <span class="ml-1">&rarr;</span>
    </a>
  </div>
</div>
